import{f as e,s as a,l,h as t,p as i,i as s,O as o,P as r,b5 as n,aX as p,q as d,mc as u,z as c,x as m,G as v,o as f,w as h,bD as b,b as g,j as x,c as _,F as k,r as w,a as y,B as $,b6 as N,t as j,H as C,n as O,md as V,af as P,aq as F,me as T,C as z,cx as H,Y as R,Z as q,R as A,bk as B,cH as D,ba as G,_ as L}from"./BArbQupS.js";import{a as M,E as S}from"./C0-q3wA8.js";import"./RPgn-SFc.js";import"./DiUQ5gHK.js";import{g as W}from"./Kut759gw.js";import"./F5y5-Ggc.js";import"./C5oUYSqU.js";const E={key:0,class:"flex flex-col items-center justify-center py-30px"},I={key:0,src:R},J={key:1,src:q},K={key:1},U={key:0,class:"flex items-center text-right justify-end"},X={key:1},Y={key:0,class:"flex items-center gap-8px clickable flex-nowrap"},Z={class:"whitespace-nowrap text-ellipsis overflow-hidden max-w-90px"},Q={key:4,class:"pr-10px inline-block"},ee=["infinite-scroll-disabled"],ae={key:0,class:"text-center px-0 pt-15px pb-10px text-12px text-[#959a9f]"},le={key:1,class:"text-center px-0 pt-15px pb-10px text-12px text-[#959a9f]"},te=L(e({__name:"positionsTable",props:{modelValue:Boolean,tableFilter:{type:Object,default:()=>({hide_risk:1,hide_small:0,user_ids:[]})}},emits:["update:modelValue"],setup(e,{emit:R}){const{mode:q}=a(l()),{t:L}=t(),te=i(),ie=s((()=>[{label:L("token"),prop:"token",align:"left",sortable:!1,minWidth:125,showOverflowTooltip:!0},{label:L("balance1"),prop:"balance_usd",align:"right",sortable:!1,formatter:e=>`$${n(e.balance_usd,4)}`},{label:L("amount"),prop:"balance",align:"right",sortable:!1,formatter:e=>`${n(e.balance,4)}`},{label:L("costPrice"),prop:"average_purchase_price_usd",align:"right",sortable:!1,formatter:e=>`$${n(e.average_purchase_price_usd,4)}`},{label:L("currentPrice"),prop:"current_price_usd",align:"right",sortable:!1,formatter:e=>`$${n(e.current_price_usd,4)}`},{label:"PnL",prop:"total_profit_ratio",width:100,align:"right",sortable:!1,getClassName:e=>Number(e.total_profit_ratio)>0?`color-${o[0]}`:`color-${r[0]}`,formatter:e=>`${Number(e.total_profit_ratio)>0?"+":"-"}${n(Math.abs(100*Number(e.total_profit_ratio)),2)}%`}])),se=p([]),oe=e,re=R,ne=d({...u}),pe=s({get:()=>oe.modelValue,set:e=>re("update:modelValue",e)});function de(e){te.push({name:"token-id",params:{id:null==e?void 0:e.index}}),pe.value=!1}const ue=async()=>{if(ne.value.loaded)return;ne.value.loaded=!0;const e=ne.value.pageNO,a=ne.value.pageSize;W({pageNO:e,pageSize:a,...oe.tableFilter}).then((l=>{var t,i;const s=(null==l?void 0:l.data)||[];Array.isArray(s)&&(null==s?void 0:s.length)>0?(se.value=1===e?null==s?void 0:s.map((e=>{var a;return{...e,index:e.token===D?(null==(a=G(e.chain))?void 0:a.wmain_wrapper)+"-"+e.chain:`${e.token}-${e.chain}`}})):[...se.value].concat(null==(i=null==(t=s.filter)?void 0:t.call(s,(e=>{var a,l;return null==(l=null==(a=se.value)?void 0:a.every)?void 0:l.call(a,(a=>a.index!==`${e.token}-${e.chain}`))})))?void 0:i.map((e=>{var a;return{...e,index:e.token===D?(null==(a=G(e.chain))?void 0:a.wmain_wrapper)+"-"+e.chain:`${e.token}-${e.chain}`}}))),ne.value.finished=(null==s?void 0:s.length)<a,ne.value.finished||ne.value.pageNO++):(1===e&&(se.value=[]),ne.value.finished=!0)})).finally((()=>{setTimeout((()=>{ne.value.loaded=!1}),200)}))};return c(oe.tableFilter,(()=>{ne.value={...u},ue()})),c((()=>pe.value),(e=>{e&&(ne.value={...u},ue())}),{immediate:!0}),m((()=>{})),(e,a)=>{const l=F,t=P,i=C,s=V,o=S,r=M,n=B,p=H;return f(),v(n,{modelValue:x(pe),"onUpdate:modelValue":a[0]||(a[0]=e=>A(pe)?pe.value=e:null),class:"dialog-position",title:e.$t("myPosition1"),width:"680","append-to-body":""},{default:h((()=>[b(e.$slots,"default",{},void 0,!0),g(r,{class:"table-position w-100%",data:x(se),height:400,onRowClick:de},{empty:h((()=>[x(ne).loaded?(f(),_("span",K)):(f(),_("div",E,["light"===x(q)?(f(),_("img",I)):$("",!0),"dark"===x(q)?(f(),_("img",J)):$("",!0),y("span",null,j(x(L)("emptyNoData")),1)]))])),append:h((()=>{var a,l;return[z(y("div",{class:"text-0 lh-0 h-0","infinite-scroll-disabled":x(ne).loaded||x(ne).finished,"infinite-scroll-distance":20,"infinite-scroll-delay":200,"infinite-scroll-immediate":!0},null,8,ee),[[p,ue]]),x(ne).loaded&&(null==(a=x(se))?void 0:a.length)>0?(f(),_("div",ae,j(e.$t("loading")),1)):x(ne).finished&&(null==(l=x(se))?void 0:l.length)>0?(f(),_("div",le,j(e.$t("noMore")),1)):$("",!0)]})),default:h((()=>[(f(!0),_(k,null,w(x(ie),(a=>(f(),v(o,{key:a.prop,label:a.label,width:a.width,prop:a.prop,"min-width":null==a?void 0:a.minWidth,align:a.align,"show-overflow-tooltip":(null==a?void 0:a.showOverflowTooltip)||!1},{header:h((({column:a})=>["total_profit_ratio"==a.property?(f(),_("div",U,[y("span",null,j(a.label),1),g(t,{effect:x(q),placement:"top-end",content:e.$t("PnLTips"),persistent:""},{default:h((()=>[g(l,{style:{cursor:"pointer","font-size":"14px","margin-left":"2px"}},{default:h((()=>[g(x(T))])),_:1})])),_:1},8,["effect","content"])])):(f(),_("div",X,j(a.label),1))])),default:h((({row:e})=>[y("div",null,["token"===(null==a?void 0:a.prop)?(f(),_("div",Y,[g(N,{row:e,class:"w-24px h-24px"},null,8,["row"]),y("div",Z,j(null==e?void 0:e.symbol),1),e.risk_score>55||e.risk_level<0?(f(),v(i,{key:0,name:"custom:danger",class:"font-14 ml-2px color-#F72121 w-14px h-14px mt-2px"})):$("",!0)])):"--"===e[a.prop]?(f(),_("span",{key:1,class:O((null==a?void 0:a.getClassName)?a.getClassName(e):"")},"--",2)):0===e[a.prop]?(f(),_("span",{key:2,class:O((null==a?void 0:a.getClassName)?a.getClassName(e):"")},"0",2)):(f(),_("span",{key:3,class:O((null==a?void 0:a.getClassName)?a.getClassName(e):"")},j(a.formatter?a.formatter(e):e[a.prop]),3)),"total_profit_ratio"===(null==a?void 0:a.prop)?(f(),_("div",Q,[g(s,{address:e.address,statistics:e,chain:e.chain,type:"topHolder"},null,8,["address","statistics","chain"])])):$("",!0)])])),_:2},1032,["label","width","prop","min-width","align","show-overflow-tooltip"])))),128))])),_:1},8,["data","onRowClick"])])),_:3},8,["modelValue","title"])}}}),[["__scopeId","data-v-490f8dd2"]]);export{te as default};
