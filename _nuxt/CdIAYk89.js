import{mb as t,D as a,aU as e,a7 as s,a0 as n,f as o,h as c,i,c as r,o as l,C as p,a as u,G as d,w as m,b as f,I as g,t as x,T as b,d as v,j as y,bp as _,cB as h,cE as k}from"./BArbQupS.js";import{E as w,a as C}from"./C0-q3wA8.js";import"./RPgn-SFc.js";import"./DiUQ5gHK.js";import{E as $}from"./nQdZ39ta.js";import{a as F,d as G,s as B,n as T,c as j}from"./DfNTDuPk.js";import"./F5y5-Ggc.js";const D={install(e){t._context=e._context,a._context=e._context,e.directive("loading",a),e.config.globalProperties.$loading=t},directive:a,service:t};function E(t="add"){const{$i18n:a}=e();return new Promise(((o,c)=>{$.prompt("",a.t("enterGroupName"),{confirmButtonText:a.t("confirm1"),cancelButtonText:a.t("cancel"),inputValidator:t=>t?!((null==t?void 0:t.length)>20)||(c(),a.t("maximum10characters")):(c(),a.t("enterGroupName"))}).then((({value:a})=>{"add"===t?function(t,a,o){const{evmAddress:c}=s(),{$i18n:i}=e(),r=D.service();F(t,c).then((()=>{n.success(i.t("success")),a(!0)})).catch((t=>{n.error(i.t("fail")),o()})).finally((()=>{r.close()}))}(a,o,c):o(a)}))}))}const A={class:"w-full px-5px [&&]:text-12px"},N=["onClick"],z=["onClick"],I=o({__name:"dialogGroupManage",props:{list:{type:Array,default:()=>[]},getData:{type:Function,default:()=>{}},loading:Boolean},setup(t){const{t:e}=c(),{evmAddress:o}=s(),F=h(k.FAV_DIALOG),D=t,I=i((()=>D.list.slice(1)));async function L(t){const{value:a}=await $.prompt("",e("enterRemark"),{confirmButtonText:e("confirm1"),cancelButtonText:e("cancel"),inputValidator:t=>t?!((null==t?void 0:t.length)>20)||e("maximum10characters"):e("cannotBeEmpty")});!async function(t,a){try{await G(t,a,o),n.success(e("success")),D.getData(),F.emit({type:"changeFavoriteGroupName"})}catch(s){}}(a,t.group_id)}async function V(t,a,s){const c=t.group_id,i=a+s;if(i<0||i+1>I.value.length)return;const r=I.value[i].group_id;try{await T(c,r,o),n.success(e("success")),D.getData()}catch(l){n.error(e("fail"))}}async function M(){await E(),D.getData()}return(s,c)=>{const i=_,h=w,k=b,G=C,T=a;return l(),r("div",A,[p((l(),d(G,{data:y(I),height:"325px",class:"[--el-font-size-base:12px]"},{empty:m((()=>[f(i)])),default:m((()=>[f(h,{label:s.$t("groupName"),prop:"name"},null,8,["label"]),f(h,{label:s.$t("rename"),align:"center"},{default:m((({row:t})=>[u("span",{class:"cursor-pointer",onClick:g((a=>L(t)),["stop","prevent"])},x(s.$t("edit")),9,N)])),_:1},8,["label"]),f(h,{prop:"name",label:s.$t("sort"),align:"center"},{default:m((({row:t,$index:a})=>[f(k,{size:"large",link:"",disabled:0===a,onClick:g((s=>async function(t,a){if(0!==a)try{await B(t.group_id,o),n.success(e("success")),D.getData()}catch(s){n.error(e("fail"))}}(t,a)),["stop"])},{default:m((()=>[v(x(s.$t("top")),1)])),_:2},1032,["disabled","onClick"]),f(k,{link:"",size:"large",disabled:0===a,onClick:g((e=>V(t,a,-1)),["stop"])},{default:m((()=>[v(x(s.$t("up")),1)])),_:2},1032,["disabled","onClick"]),f(k,{link:"",size:"large",disabled:a+1===y(I).length,onClick:g((e=>V(t,a,1)),["stop"])},{default:m((()=>[v(x(s.$t("down")),1)])),_:2},1032,["disabled","onClick"])])),_:1},8,["label"]),f(h,{label:s.$t("operate"),align:"center"},{default:m((({row:t})=>[u("span",{class:"cursor-pointer",onClick:g((a=>async function(t){await $.confirm(e("removeFavGroupTips"),e("tips"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),dangerouslyUseHTMLString:!0,customClass:""});try{await j(t.group_id,o),n.success(e("success")),D.getData(),F.emit({type:"removeFavoriteGroup",groupId:t.group_id})}catch(a){}}(t)),["stop","prevent"])},x(s.$t("delete")),9,z)])),_:1},8,["label"])])),_:1},8,["data"])),[[T,t.loading]]),u("span",{class:"mt-20px cursor-pointer px-26px py-12px text-14px font-500 radius-6px block text-center color-[--d-F5F5F5-l-333] bg-[--d-3F80F7-l-EAECEF] hover:opacity-80",onClick:M},x(y(e)("newGroup")),1)])}}});export{I as default};
